<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Register</title>  <!-- CORE CSS-->		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/css/materialize.min.css">

		<style type="text/css">
			html,
			body {
				height: 100%;
			}
			html {
				display: table;
				margin: auto;
			}
			body {
				display: table-cell;
				vertical-align: middle;
			}
			.margin {
			margin: 0 !important;
			}
		</style>
	
	</head>
	
	<body class="blue-grey">
	<div id="login-page" class="row">
		<div class="col s12 z-depth-6 card-panel">
			<div class="login-form login-div">
				<div class="row">
					<div class="input-field col s12 center">
						<p class="center  login-form-text" style="font-weight: 800;">LOGIN INTO YOUR IOT EGG-TRAY</p>
					</div>
				</div>
				<div class="row margin">
					<div class="input-field col s12">
						<i class="mdi-communication-email prefix" style="color: green;"></i>
						<input id="email_field" type="email" class="validate">
					</div>
				</div>
				<div class="row margin">
					<div class="input-field col s12">
						<i class="mdi-action-lock-outline prefix" style="color: green;"></i>
						<input id="password_field" type="password" class="validate">
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<button class="btn waves-effect green waves-light col s12" id="register" onclick="login()"> Login to account</button>
						<br />
						<a href="localhost:5000/signup">
							<button class="btn waves-effect blue waves-light col s12" id="register" > Sign you up</button>
						</a>
					</div>
				</div>
			</div>
		</div>
    <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
        <script>
            // Initialize Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyDLmhcXACdSpMFQ4E_XWNgmsHS03gK1Bog",
                authDomain: "eggtray-iotproject.firebaseapp.com",
                databaseURL: "https://eggtray-iotproject-default-rtdb.firebaseio.com",
                projectId: "eggtray-iotproject",
                storageBucket: "eggtray-iotproject.appspot.com",
                messagingSenderId: "234675943641",
                appId: "1:234675943641:web:abb386535b3ac21eaa66c8",
                measurementId: "G-6P062F2W8M"
            };
            firebase.initializeApp(firebaseConfig);

			function login(){
				var userEmail = document.getElementById("email_field").value;
				var userPass = document.getElementById("password_field").value;  
				firebase.auth().signInWithEmailAndPassword(userEmail, userPass).catch(function(error) {
					// Handle Errors here.
					var errorCode = error.code;
					var errorMessage = error.message;    
					window.alert("Error : " + errorMessage);
				}).then(() => {
                	window.location.assign("/profile");
              	});
			}
        </script>
	</body>
</html>